<html>
<head>
    <script src="node_modules/jquery/dist/jquery.min.js" type="text/javascript"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="node_modules/bootstrap/dist/css/bootstrap-theme.min.css">

</head>

<body>
<div class="page-header">
    <h1>mlhelp<br><small>Let's figure out what you need</small></h1>
</div>
<div class="progress">
    <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" id="progbar" style="width: 0%;">
    </div>
</div>
<div id="survey">
</div>

<script>

var survey = [
    {
        "question" : "Are you trying to estimate a value, classify, or discover?",
        "answers" : ["Estimate", "Classify", "Discover"],
        "userSelected" : undefined
    },
    {
        "question" : "Are you more concerned with explanatory power, or predictive power?",
        "answers" : ["Explanatory Power", "Predictive Power", "I'm unsure"],
        "userSelected" : undefined
    },
    {
        "question" : "Do you have reason to believe linearity?",
        "answers" : ["Yes", "No", "I'm unsure"],
        "userSelected" : undefined
    },
    {
        "question" : "Does your data follow a normal distribution?",
        "answers" : ["Yes", "No", "I'm unsure"],
        "userSelected" : undefined
    },
    {
        "question" : "Do you have have more variables than samples?",
        "answers" : ["Yes", "No", "I'm unsure"],
        "userSelected" : undefined
    },
    {
        "question" : "Are your variables independent of each other?",
        "answers" : ["Yes", "No", "I'm unsure"],
        "userSelected" : undefined
    },
    {
        "question" : "Is time a variable you want to use?",
        "answers" : ["Yes", "No", "I'm unsure"],
        "userSelected" : undefined
    }
];

var stage = 0;

function writeQuestion(key) {

    if (key >= survey.length) {
        answer();
        return
    }

    ss = '<div id="'+key+'">';
    ss += survey[key].question+"<br>";
    for (a in survey[key].answers) {
        ss += '<input type="radio" name="'+key+'" value="'+survey[key].answers[a]+'" onclick=nextUp()> '+survey[key].answers[a]+' <br>'
    }
    ss += '</div>';
    return ss
}

function updateProgress() {
    return ((stage+1) / survey.length)*100 + "%";
}

function nextUp() {
    $("#"+stage).hide();
    survey[stage].userSelected = $('input[name$="'+stage+'"]').val();
    $("#progbar").width(updateProgress());
    stage += 1;
    $("#survey").append(writeQuestion(stage));
}

function answer() {
    // This function will traverse the survey object after user interaction to provide suggestion
    $("#survey").hide()
    $("body").append('<div id="answer">ANSWER</div>')
}

$(document).ready(function() {
   $("#survey").append(writeQuestion(stage));
});

</script>



</body>
</html>

